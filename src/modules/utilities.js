const utilities = (() => {
  const getIconSVG = (code) => {
    // Sunny
    if (code === 1000) {
      return `<svg xmlns="http://www.w3.org/2000/svg" fill="#f2e9e4" height="24" viewBox="0 -960 960 960" width="24" > <path d="M447-730.077v-161.385h66v161.385h-66Zm232.846 96.539-45.308-45.308 112.308-116.077 47.077 47.308-114.077 114.077ZM730.077-447v-66h161.385v66H730.077ZM447-68.538v-160.616h66v160.616h-66ZM281.692-634.77 164.077-746.846l50.077-45.308 113.077 112.308-45.539 45.077Zm465.923 468.692L634.538-281.154l45.078-44.308 113.538 112.847-45.539 46.538ZM68.538-447v-66h161.385v66H68.538Zm143.847 281.923-44.539-49.077 111.308-111.308 23.384 22.924 24.154 24.154-114.307 113.307ZM480.181-280q-83.258 0-141.72-58.28Q280-396.561 280-479.819q0-83.258 58.28-141.72Q396.561-680 479.819-680q83.258 0 141.72 58.28Q680-563.439 680-480.181q0 83.258-58.28 141.72Q563.439-280 480.181-280Z" /> </svg>`;
    }

    // Partly Cloudy
    if (code === 1003) {
      return `<svg xmlns="http://www.w3.org/2000/svg" fill="#f2e9e4" height="24" viewBox="0 -960 960 960" width="24" ><path d="M263.077-198.461q-56.77 0-96.846-40.077-40.077-40.077-40.077-96.847 0-53.692 37.769-91.461t91.462-37.769q38 0 69.538 20.115 31.539 20.115 48.231 55.115l15.385 36.846h38.922q32.001 0 54.078 22.577 22.076 22.577 22.076 54.577 0 32.001-22.461 54.462-22.462 22.462-54.462 22.462H263.077Zm317.231-108.923q-12.385-51.462-50.193-87.424-37.807-35.961-89.038-36.5-16.769-49.538-58.962-78.731-42.192-29.192-92.884-31.5 19.846-62.23 72.461-100.346Q414.308-680 480-680q83.077 0 141.539 58.461Q680-563.077 680-480q0 53.462-27.115 99.346-27.116 45.885-72.577 73.27ZM447-730.077v-161.385h66v161.385h-66Zm232.846 96.539-46.308-47.078 113.847-114.307 46.538 47.308-114.077 114.077ZM730.077-447v-66h161.385v66H730.077Zm17.308 281.154L633.538-280.154l47.078-47.077 114.307 113.846-47.538 47.539ZM280.923-632.769 165.307-748.385l48.078-45 113.846 114.308-46.308 46.308Z" /> </svg>`;
    }

    // Cloudy or Overcast
    if ([1006, 1009].includes(code)) {
      return `<svg xmlns="http://www.w3.org/2000/svg" fill="#f2e9e4" height="24" viewBox="0 -960 960 960" width="24" > <path d="M256-170q-86.846 0-148.423-59.731Q46-289.461 46-376.308q0-75.769 48.5-136.077 48.5-60.307 123.346-70.231Q240.308-673 313.231-731.5 386.154-790 480-790q105.077 0 182.039 69.961Q739-650.077 750-543v40h24.615q60.462 8.846 99.924 55.192Q914-401.462 914-338q0 70.846-48.577 119.423T746-170H256Z" /> </svg>`;
    }

    // Mist or Fog/Freezing Fog
    if ([1030, 1135, 1147].includes(code)) {
      return `<svg xmlns="http://www.w3.org/2000/svg" fill="#f2e9e4" height="24" viewBox="0 -960 960 960" width="24"><path d="M160-200q-17 0-28.5-11.5T120-240q0-17 11.5-28.5T160-280h400q17 0 28.5 11.5T600-240q0 17-11.5 28.5T560-200H160Zm560 0q-17 0-28.5-11.5T680-240q0-17 11.5-28.5T720-280h80q17 0 28.5 11.5T840-240q0 17-11.5 28.5T800-200h-80ZM160-360q-17 0-28.5-11.5T120-400q0-17 11.5-28.5T160-440h80q17 0 28.5 11.5T280-400q0 17-11.5 28.5T240-360h-80Zm240 0q-17 0-28.5-11.5T360-400q0-17 11.5-28.5T400-440h400q17 0 28.5 11.5T840-400q0 17-11.5 28.5T800-360H400ZM160-520q-17 0-28.5-11.5T120-560q0-17 11.5-28.5T160-600h440q17 0 28.5 11.5T640-560q0 17-11.5 28.5T600-520H160Zm600 0q-17 0-28.5-11.5T720-560q0-17 11.5-28.5T760-600h40q17 0 28.5 11.5T840-560q0 17-11.5 28.5T800-520h-40ZM160-680q-17 0-28.5-11.5T120-720q0-17 11.5-28.5T160-760h200q17 0 28.5 11.5T400-720q0 17-11.5 28.5T360-680H160Zm360 0q-17 0-28.5-11.5T480-720q0-17 11.5-28.5T520-760h280q17 0 28.5 11.5T840-720q0 17-11.5 28.5T800-680H520Z"/></svg>`;
    }

    // Patchy Snow/Sleet/Freezing Drizzle, Hail
    if (
      [1066, 1069, 1072, 1204, 1210, 1216, 1222, 1237, 1261, 1264].includes(
        code
      )
    ) {
      return `<svg xmlns="http://www.w3.org/2000/svg" fill="#f2e9e4" height="24" viewBox="0 -960 960 960" width="24"><path d="M338-204q-15 8-30.5 2.5T284-222l-60-120q-8-15-2.5-30.5T242-396q15-8 30.5-2.5T296-378l60 120q8 15 2.5 30.5T338-204Zm360 0q-15 8-30.5 2.5T644-222L464-582q-8-15-2.5-30.5T482-636q15-8 30.5-2.5T536-618l180 360q8 15 2.5 30.5T698-204Zm-188 4q-17 0-28.5-11.5T470-240q0-17 11.5-28.5T510-280q17 0 28.5 11.5T550-240q0 17-11.5 28.5T510-200Zm388-4q-15 8-30.5 2.5T844-222l-20-40q-8-15-2.5-30.5T842-316q15-8 30.5-2.5T896-298l20 40q8 15 2.5 30.5T898-204ZM458-324q-15 8-30.5 2.5T404-342L224-702q-8-15-2.5-30.5T242-756q15-8 30.5-2.5T296-738l180 360q8 15 2.5 30.5T458-324Zm342-36q-17 0-28.5-11.5T760-400q0-17 11.5-28.5T800-440q17 0 28.5 11.5T840-400q0 17-11.5 28.5T800-360Zm-600-80q-17 0-28.5-11.5T160-480q0-17 11.5-28.5T200-520q17 0 28.5 11.5T240-480q0 17-11.5 28.5T200-440Zm558-44q-15 8-30.5 2.5T704-502L604-702q-8-15-2.5-30.5T622-756q15-8 30.5-2.5T676-738l100 200q8 15 2.5 30.5T758-484Zm-600-80q-15 8-30.5 2.5T104-582L44-702q-8-15-2.5-30.5T62-756q15-8 30.5-2.5T116-738l60 120q8 15 2.5 30.5T158-564Zm292-116q-17 0-28.5-11.5T410-720q0-17 11.5-28.5T450-760q17 0 28.5 11.5T490-720q0 17-11.5 28.5T450-680Z"/></svg>`;
    }

    // Thunder
    if ([1087, 1273, 1276, 1279, 1282].includes(code)) {
      return `<svg xmlns="http://www.w3.org/2000/svg" fill="#f2e9e4" height="24" viewBox="0 -960 960 960" width="24"><path d="m512.846-27 77.461-88.154-80-40L595.231-253h34.923l-78.461 88.154 80 40L546.769-27h-33.923Zm-242 0 78.461-88.154-80-40L354.231-253h34.923l-78.461 88.154 80 40L305.769-27h-34.923ZM300-337q-89.308 0-151.154-61.846Q87-460.692 87-550q0-80.615 53.808-140.231 53.807-59.615 134.5-71.308 31.692-57.23 84.846-89.346Q413.308-883 480-883q87.154 0 151.539 58.115 64.384 58.116 79.538 142.346 74.615 8.462 118.269 57.731Q873-575.539 873-510q0 71.539-50.731 122.269Q771.539-337 700-337H300Z"/></svg>`;
    }

    // Snow/Blizzard
    if (
      [1114, 1117, 1207, 1213, 1219, 1225, 1249, 1252, 1255, 1258].includes(
        code
      )
    ) {
      return `<svg xmlns="http://www.w3.org/2000/svg" fill="#f2e9e4" height="24" viewBox="0 -960 960 960" width="24"><path d="M446-84v-169.692l-132 132L265.692-168 446-348.308V-446h-95.692L168-265.692 121.692-314l134-132H84v-66h171.692l-134-134L168-694.308 350.308-512H446v-99.692L265.692-792 314-838.308l132 132V-876h66v169.692l134-132L694.308-792 512-611.692V-512h97.692L792-694.308 838.308-646l-134 134H876v66H704.308l134 132L792-265.692 609.692-446H512v97.692L694.308-168 646-121.692l-134-132V-84h-66Z"/></svg>`;
    }

    // Light Rain, Drizzle, Patchy Rain, Moderate Rain
    if (
      [
        1063, 1150, 1153, 1168, 1171, 1180, 1183, 1186, 1189, 1198, 1240,
      ].includes(code)
    ) {
      return `<svg xmlns="http://www.w3.org/2000/svg" fill="#f2e9e4" height="24" viewBox="0 -960 960 960" width="24"><path d="M189.769-501.461q-12.307 5.384-25.115 1.961-12.808-3.423-18.193-15.731l-95-190q-5.384-12.307-1.961-25.115 3.423-12.808 15.73-18.193 12.308-5.384 25.116-1.961t18.193 15.731l95 190q5.384 12.307 1.961 25.115-3.423 12.808-15.731 18.193Zm145 290q-12.307 7.153-25.615 2.346-13.308-4.808-19.462-17.116l-75-150q-5.384-12.307-1.077-25.115 4.308-12.808 16.616-18.962 12.307-5.384 25.115-1.077 12.808 4.308 18.193 16.616l76.769 150q5.384 12.307 1.077 24.731-4.308 12.423-16.616 18.577Zm77-210q-12.307 5.384-26 1.961-13.692-3.423-19.077-15.731l-135-270q-5.384-12.307-1.461-25.115 3.923-12.808 16.23-18.193 12.308-6.153 25.501-2.346 13.192 3.808 18.577 16.116l135 270q5.384 12.307 1.961 25.115-3.423 12.808-15.731 18.193Zm87-200q-12.307 7.153-25.615 3.23-13.308-3.923-18.693-16.23l-35.769-71.77q-5.384-12.307-1.461-25.5 3.923-13.192 16.23-18.577 12.308-5.384 25.885-1.077 13.577 4.308 18.962 16.616l35 70q5.384 12.307 1.577 24.731-3.808 12.423-16.116 18.577Zm28 410.769q-12.307 7.154-26 1.961-13.692-5.192-19.077-17.5l-35-70q-5.384-12.307-1.077-25.5 4.308-13.192 16.616-18.577 12.307-5.384 24.731-1.077 12.423 4.308 18.577 16.616l36.769 69.23q5.384 12.308 1.077 25.001-4.308 12.692-16.616 19.846Zm187 0q-12.307 7.154-25.615 1.961-13.308-5.192-18.693-17.5l-135-270q-5.384-12.307-1.461-25.115 3.923-12.808 16.231-18.962 12.307-5.384 25.5-1.077 13.192 4.308 18.577 16.616l135 269.23q5.384 12.308 1.577 25.501-3.808 13.192-16.116 19.346Zm56-250.769q-12.307 6.153-25.615 1.846-13.308-4.308-19.462-16.616l-115-230q-5.384-12.307-1.077-25.5 4.308-13.192 16.616-18.577 12.307-5.384 25.115-1.077 12.808 4.308 18.193 16.616l115 230q5.384 12.307 1.961 25.115-3.423 12.808-15.731 18.193Zm125 250q-12.307 6.153-25.615 1.846-13.308-4.308-19.462-16.616l-55-110q-5.384-12.307-1.077-25.5 4.308-13.192 16.616-18.577 12.307-5.384 25.115-1.077 12.808 4.308 18.193 16.616l55 110q5.384 12.307 1.961 25.115-3.423 12.808-15.731 18.193Z"/></svg>`;
    }

    // Heavy Rain
    if ([1192, 1195, 1201, 1243, 1246].includes(code)) {
      return `<svg xmlns="http://www.w3.org/2000/svg" fill="#f2e9e4" height="24" viewBox="0 -960 960 960" width="24"><path d="M334.769-211.461q-12.307 5.384-25.115 1.961-12.808-3.423-18.193-15.731l-240-480q-5.384-12.307-1.961-25.115 3.423-12.808 15.73-18.193 12.308-5.384 25.116-1.961t18.193 15.731l241.769 480q5.384 12.307 1.077 24.731-4.308 12.423-16.616 18.577Zm187 0q-12.307 7.153-26 2.846-13.692-4.308-19.077-16.616l-240-480q-5.384-12.307-1.461-25.115 3.923-12.808 16.23-18.193 12.308-5.384 25.885-1.961 13.577 3.423 18.962 15.731l240 480q5.384 12.307 1.577 24.731-3.808 12.423-16.116 18.577Zm373 0q-12.307 5.384-25.115 1.461-12.808-3.923-18.193-16.231l-240-480q-5.384-12.307-1.461-25.5 3.923-13.192 16.231-18.577 12.307-5.384 25.5-1.077 13.192 4.308 18.577 16.616l240 480q5.384 12.307 1.077 25.115-4.308 12.808-16.616 18.193Zm-186 .769q-12.307 7.154-26 1.961-13.692-5.192-19.077-17.5l-240-480q-5.384-12.307-1.461-25.5 3.923-13.192 16.23-18.577 12.308-5.384 25.885-1.077 13.577 4.308 18.962 16.616l239.231 479.23q5.384 12.308 1.961 25.501-3.423 13.192-15.731 19.346Z"/></svg>`;
    }
  };

  const getHourEl = (data) => {
    const topDiv = document.createElement("div");
    topDiv.classList.add("forecast-hour");

    const h5 = document.createElement("h5");
    h5.classList.add("hour-time");

    const imgDiv = document.createElement("div");
    imgDiv.classList.add("hour-img");

    const hourInfoDiv = document.createElement("div");
    hourInfoDiv.classList.add("hour-info");

    hourInfoDiv.append(
      createHourInfoSection("Temp", "hour-temp"),
      createHourInfoSection("Feel", "hour-feels"),
      createHourInfoSection("Rain", "hour-rain")
    );
    topDiv.append(h5, imgDiv, hourInfoDiv);

    populateHourInfoDiv(topDiv, data);

    return topDiv;
  };

  const createHourInfoSection = (titleStr, infoClass) => {
    const section = document.createElement("div");
    section.classList.add("hour-info-section");

    const title = document.createElement("p");
    title.classList.add("info-title");
    title.textContent = titleStr;

    const info = document.createElement("p");
    info.classList.add(infoClass);

    section.append(title, info);
    return section;
  };

  const populateHourInfoDiv = (div, data) => {
    const img = div.querySelector(".hour-img");
    img.innerHTML = getIconSVG(data.condition.code);

    const hourDisplay = div.querySelector(".hour-time");
    hourDisplay.textContent = data.time.slice(-5);

    const hourTemp = div.querySelector(".hour-temp");
    hourTemp.innerHTML = Math.trunc(data.temp_c) + "&deg";

    const hourFeels = div.querySelector(".hour-feels");
    hourFeels.innerHTML = Math.trunc(data.feelslike_c) + "&deg";

    const hourRain = div.querySelector(".hour-rain");
    hourRain.innerHTML = data.chance_of_rain + "%";
  };

  return {
    getIconSVG,
    getHourEl,
  };
})();

export default utilities;
